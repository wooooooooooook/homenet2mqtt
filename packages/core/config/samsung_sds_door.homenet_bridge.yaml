homenet_bridge:
  serial:
    baud_rate: 9600
    data_bits: 8
    parity: even
    stop_bits: 1
  
  packet_defaults:
    rx_timeout: 10ms
    tx_delay: 0ms # Original was 0ms
    tx_timeout: 500ms
    tx_retry_cnt: 3
    rx_header: [0xA4]
    tx_header: [] # Not explicitly defined in original, assuming entity-specific
    rx_footer: [] # Not explicitly defined in original
    tx_footer: [] # Not explicitly defined in original
    rx_checksum: custom # Original was lambda
    tx_checksum: custom # Original was lambda
    # Original rx_checksum lambda:
    # uint8_t crc = 0xA4;
    # for (size_t i = 0; i < len; i++)
    #   crc ^= data[i];
    # if (data[0] < 0x7C) crc ^= 0x80;
    # return crc;
    # Original tx_checksum lambda:
    # uint8_t crc = 0x00;
    # for (size_t i = 0; i < len; i++)
    #   crc ^= data[i];
    # crc ^= 0x80;
    # return crc;

  devices:
    - name: "Samsung SDS Door"
      entities:
        - type: binary_sensor
          id: "door_bell"
          name: "Bell Private"
          state:
            data: [0x30]
            mask: 0xF0
          state_on:
            data: [0x31, 0x00]
          state_off:
            data: [0x3E, 0x01]
            mask: 0xFF # Mask is applied to the whole data, not just the first byte
        - type: binary_sensor
          id: "door_bell_common"
          name: "Bell Public"
          state:
            data: [0x30]
            mask: 0xF0
          state_on:
            data: [0x32, 0x00]
          state_off:
            data: [0x3E, 0x06]
            mask: 0xFF # Mask is applied to the whole data, not just the first byte
