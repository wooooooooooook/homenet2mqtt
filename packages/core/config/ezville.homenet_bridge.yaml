homenet_bridge:
  serial:
    baud_rate: 9600
    data_bits: 8
    parity: none
    stop_bits: 1
  
  packet_defaults:
    rx_timeout: 10ms
    tx_delay: 50ms
    tx_timeout: 500ms
    tx_retry_cnt: 3
    rx_header: [0xF7]
    tx_header: [0xF7]
    rx_footer: [] # Not explicitly defined in original
    tx_footer: [] # Not explicitly defined in original
    rx_checksum: xor_add # Mapping rx_checksum2 to rx_checksum
    tx_checksum: xor_add # Mapping tx_checksum2 to tx_checksum

  devices:
    - name: "Ezville Wallpad"
      entities:
        - type: light
          id: "light_1_0"
          name: "light_1_0"
          state:
            data: [0x0e, 0x11, 0x81]
          state_off:
            offset: 5
            data: [0x00, 0x00, 0x00]
          state_on:
            offset: 5
            data: [0x00, 0x00, 0x00]
            inverted: True
          command_on:
            cmd: [0x0e, 0x11, 0x41, 0x03, 0x0f, 0x01, 0x00]
            ack: [0x0e, 0x11, 0xC1]
          command_off:
            cmd: [0x0e, 0x11, 0x41, 0x03, 0x0f, 0x00, 0x00]
            ack: [0x0e, 0x11, 0xC1]
        - type: light
          id: "light_1_1"
          name: "light_1_1"
          state:
            data: [0x0e, 0x11, 0x81]
          state_on:
            offset: 5
            data: [0x01]
          state_off:
            offset: 5
            data: [0x00]
          command_on:
            cmd: [0x0e, 0x11, 0x41, 0x03, 0x01, 0x01, 0x00]
            ack: [0x0e, 0x11, 0xC1]
          command_off:
            cmd: [0x0e, 0x11, 0x41, 0x03, 0x01, 0x00, 0x00]
            ack: [0x0e, 0x11, 0xC1]
        - type: light
          id: "light_1_2"
          name: "light_1_2"
          state:
            data: [0x0e, 0x11, 0x81]
          state_on:
            offset: 6
            data: [0x01]
          state_off:
            offset: 6
            data: [0x00]
          command_on:
            cmd: [0x0e, 0x11, 0x41, 0x03, 0x02, 0x01, 0x00]
            ack: [0x0e, 0x11, 0xC1]
          command_off:
            cmd: [0x0e, 0x11, 0x41, 0x03, 0x02, 0x00, 0x00]
            ack: [0x0e, 0x11, 0xC1]
        - type: light
          id: "light_1_3"
          name: "light_1_3"
          state:
            data: [0x0e, 0x11, 0x81]
          state_on:
            offset: 7
            data: [0x01]
          state_off:
            offset: 7
            data: [0x00]
          command_on:
            cmd: [0x0e, 0x11, 0x41, 0x03, 0x03, 0x01, 0x00]
            ack: [0x0e, 0x11, 0xC1]
          command_off:
            cmd: [0x0e, 0x11, 0x41, 0x03, 0x03, 0x00, 0x00]
            ack: [0x0e, 0x11, 0xC1]
        - type: light
          id: "light_2_0"
          name: "light_2_0"
          state:
            data: [0x0e, 0x12, 0x81]
          state_off:
            offset: 5
            data: [0x00, 0x00]
          state_on:
            offset: 5
            data: [0x00, 0x00]
            inverted: True
          command_on:
            cmd: [0x0e, 0x12, 0x41, 0x03, 0x0f, 0x01, 0x00]
            ack: [0x0e, 0x12, 0xC1]
          command_off:
            cmd: [0x0e, 0x12, 0x41, 0x03, 0x0f, 0x00, 0x00]
            ack: [0x0e, 0x12, 0xC1]
        - type: light
          id: "light_2_1"
          name: "light_2_1"
          state:
            data: [0x0e, 0x12, 0x81]
          state_on:
            offset: 5
            data: [0x01]
          state_off:
            offset: 5
            data: [0x00]
          command_on:
            cmd: [0x0e, 0x12, 0x41, 0x03, 0x01, 0x01, 0x00]
            ack: [0x0e, 0x12, 0xC1]
          command_off:
            cmd: [0x0e, 0x12, 0x41, 0x03, 0x01, 0x00, 0x00]
            ack: [0x0e, 0x12, 0xC1]
        - type: light
          id: "light_2_2"
          name: "light_2_2"
          state:
            data: [0x0e, 0x12, 0x81]
          state_on:
            offset: 6
            data: [0x01]
          state_off:
            offset: 6
            data: [0x00]
          command_on:
            cmd: [0x0e, 0x12, 0x41, 0x03, 0x02, 0x01, 0x00]
            ack: [0x0e, 0x12, 0xC1]
          command_off:
            cmd: [0x0e, 0x12, 0x41, 0x03, 0x02, 0x00, 0x00]
            ack: [0x0e, 0x12, 0xC1]
        - type: light
          id: "light_3_1"
          name: "light_3_1"
          state:
            data: [0x0e, 0x13, 0x81]
          state_on:
            offset: 5
            data: [0x01]
          state_off:
            offset: 5
            data: [0x00]
          command_on:
            cmd: [0x0e, 0x13, 0x41, 0x03, 0x01, 0x01, 0x00]
            ack: [0x0e, 0x13, 0xC1]
          command_off:
            cmd: [0x0e, 0x13, 0x41, 0x03, 0x01, 0x00, 0x00]
            ack: [0x0e, 0x13, 0xC1]
        - type: light
          id: "light_4_1"
          name: "light_4_1"
          state:
            data: [0x0e, 0x14, 0x81]
          state_on:
            offset: 5
            data: [0x01]
          state_off:
            offset: 5
            data: [0x00]
          command_on:
            cmd: [0x0e, 0x14, 0x41, 0x03, 0x01, 0x01, 0x00]
            ack: [0x0e, 0x14, 0xC1]
          command_off:
            cmd: [0x0e, 0x14, 0x41, 0x03, 0x01, 0x00, 0x00]
            ack: [0x0e, 0x14, 0xC1]

        - type: sensor
          id: "power_usage_current"
          name: "Current Power Usage"
          state:
            data: [0x30, 0x03, 0x81]
          state_number:
            offset: 6
            length: 3
            precision: 2
            signed: False
            decode: bcd
          # accuracy_decimals and unit_of_measurement are UI/HA specific, not part of core schema
        - type: sensor
          id: "power_usage_total"
          name: "Total Power Usage"
          state:
            data: [0x30, 0x03, 0x81]
          state_number:
            offset: 9
            length: 3
            precision: 1
            signed: False
            decode: bcd
        - type: sensor
          id: "water_usage_total"
          name: "Total Water Usage"
          state:
            data: [0x30, 0x01, 0x81]
          command_update:
            cmd: [0x30, 0x01, 0x01, 0x00]
          state_number:
            offset: 9
            length: 3
            precision: 2
            signed: False
            decode: bcd
        - type: sensor
          id: "gas_usage_total"
          name: "Total Gas Usage"
          state:
            data: [0x30, 0x02, 0x81]
          command_update:
            cmd: [0x30, 0x02, 0x01, 0x00]
          state_number:
            offset: 9
            length: 3
            precision: 2
            signed: False
            decode: bcd
        - type: sensor
          id: "power_1_1"
          name: "power_1_1"
          state:
            data: [0x39, 0x1f, 0x81]
          state_number:
            offset: 5
            length: 3
            precision: 1
            signed: False
            decode: bcd
        - type: sensor
          id: "power_1_2"
          name: "power_1_2"
          state:
            data: [0x39, 0x1f, 0x81]
          state_number:
            offset: 8
            length: 3
            precision: 1
            signed: False
            decode: bcd
        - type: sensor
          id: "power_2_1"
          name: "power_2_1"
          state:
            data: [0x39, 0x2f, 0x81]
          state_number:
            offset: 5
            length: 3
            precision: 1
            signed: False
            decode: bcd
        - type: sensor
          id: "power_2_2"
          name: "power_2_2"
          state:
            data: [0x39, 0x2f, 0x81]
          state_number:
            offset: 8
            length: 3
            precision: 1
            signed: False
            decode: bcd
        - type: sensor
          id: "power_3_1"
          name: "power_3_1"
          state:
            data: [0x39, 0x3f, 0x81]
          state_number:
            offset: 5
            length: 3
            precision: 1
            signed: False
            decode: bcd
        - type: sensor
          id: "power_3_2"
          name: "power_3_2"
          state:
            data: [0x39, 0x3f, 0x81]
          state_number:
            offset: 8
            length: 3
            precision: 1
            signed: False
            decode: bcd
        - type: sensor
          id: "power_4_1"
          name: "power_4_1"
          state:
            data: [0x39, 0x4f, 0x81]
          state_number:
            offset: 5
            length: 3
            precision: 1
            signed: False
            decode: bcd
        - type: sensor
          id: "power_4_2"
          name: "power_4_2"
          state:
            data: [0x39, 0x4f, 0x81]
          state_number:
            offset: 8
            length: 3
            precision: 1
            signed: False
            decode: bcd
        - type: sensor
          id: "power_8_1"
          name: "power_8_1"
          state:
            data: [0x39, 0x8f, 0x81]
          state_number:
            offset: 5
            length: 3
            precision: 1
            signed: False
            decode: bcd
        - type: sensor
          id: "power_8_2"
          name: "power_8_2"
          state:
            data: [0x39, 0x8f, 0x81]
          state_number:
            offset: 8
            length: 3
            precision: 1
            signed: False
            decode: bcd

        - type: switch
          id: "outlet_1_1"
          name: "outlet_1_1"
          state:
            data: [0x39, 0x1f, 0x81]
          state_on:
            offset: 5
            mask: 0x10
            data: [0x10]
          state_off:
            offset: 5
            mask: 0x10
            data: [0x00]
          command_on:
            cmd: [0x39, 0x11, 0x41, 0x01, 0x11]
            ack: [0x39, 0x11, 0xC1]
          command_off:
            cmd: [0x39, 0x11, 0x41, 0x01, 0x10]
            ack: [0x39, 0x11, 0xC1]
        - type: switch
          id: "outlet_1_2"
          name: "outlet_1_2"
          state:
            data: [0x39, 0x1f, 0x81]
          state_on:
            offset: 8
            mask: 0x10
            data: [0x10]
          state_off:
            offset: 8
            mask: 0x10
            data: [0x00]
          command_on:
            cmd: [0x39, 0x12, 0x41, 0x01, 0x11]
            ack: [0x39, 0x12, 0xC1]
          command_off:
            cmd: [0x39, 0x12, 0x41, 0x01, 0x10]
            ack: [0x39, 0x12, 0xC1]
        - type: switch
          id: "outlet_2_1"
          name: "outlet_2_1"
          state:
            data: [0x39, 0x2f, 0x81]
          state_on:
            offset: 5
            mask: 0x10
            data: [0x10]
          state_off:
            offset: 5
            mask: 0x10
            data: [0x00]
          command_on:
            cmd: [0x39, 0x21, 0x41, 0x01, 0x11]
            ack: [0x39, 0x21, 0xC1]
          command_off:
            cmd: [0x39, 0x21, 0x41, 0x01, 0x10]
            ack: [0x39, 0x21, 0xC1]
        - type: switch
          id: "outlet_2_2"
          name: "outlet_2_2"
          state:
            data: [0x39, 0x2f, 0x81]
          state_on:
            offset: 8
            mask: 0x10
            data: [0x10]
          state_off:
            offset: 8
            mask: 0x10
            data: [0x00]
          command_on:
            cmd: [0x39, 0x22, 0x41, 0x01, 0x11]
            ack: [0x39, 0x22, 0xC1]
          command_off:
            cmd: [0x39, 0x22, 0x41, 0x01, 0x10]
            ack: [0x39, 0x22, 0xC1]
        - type: switch
          id: "outlet_3_1"
          name: "outlet_3_1"
          state:
            data: [0x39, 0x3f, 0x81]
          state_on:
            offset: 5
            mask: 0x10
            data: [0x10]
          state_off:
            offset: 5
            mask: 0x10
            data: [0x00]
          command_on:
            cmd: [0x39, 0x31, 0x41, 0x01, 0x11]
            ack: [0x39, 0x31, 0xC1]
          command_off:
            cmd: [0x39, 0x31, 0x41, 0x01, 0x10]
            ack: [0x39, 0x31, 0xC1]
        - type: switch
          id: "outlet_3_2"
          name: "outlet_3_2"
          state:
            data: [0x39, 0x3f, 0x81]
          state_on:
            offset: 8
            mask: 0x10
            data: [0x10]
          state_off:
            offset: 8
            mask: 0x10
            data: [0x00]
          command_on:
            cmd: [0x39, 0x32, 0x41, 0x01, 0x11]
            ack: [0x39, 0x32, 0xC1]
          command_off:
            cmd: [0x39, 0x32, 0x41, 0x01, 0x10]
            ack: [0x39, 0x32, 0xC1]
        - type: switch
          id: "outlet_4_1"
          name: "outlet_4_1"
          state:
            data: [0x39, 0x4f, 0x81]
          state_on:
            offset: 5
            mask: 0x10
            data: [0x10]
          state_off:
            offset: 5
            mask: 0x10
            data: [0x00]
          command_on:
            cmd: [0x39, 0x41, 0x41, 0x01, 0x11]
            ack: [0x39, 0x41, 0xC1]
          command_off:
            cmd: [0x39, 0x41, 0x41, 0x01, 0x10]
            ack: [0x39, 0x41, 0xC1]
        - type: switch
          id: "outlet_4_2"
          name: "outlet_4_2"
          state:
            data: [0x39, 0x4f, 0x81]
          state_on:
            offset: 8
            mask: 0x10
            data: [0x10]
          state_off:
            offset: 8
            mask: 0x10
            data: [0x00]
          command_on:
            cmd: [0x39, 0x42, 0x41, 0x01, 0x11]
            ack: [0x39, 0x42, 0xC1]
          command_off:
            cmd: [0x39, 0x42, 0x41, 0x01, 0x10]
            ack: [0x39, 0x42, 0xC1]
        - type: switch
          id: "outlet_8_1"
          name: "outlet_8_1"
          state:
            data: [0x39, 0x8f, 0x81]
          state_on:
            offset: 5
            mask: 0x10
            data: [0x10]
          state_off:
            offset: 5
            mask: 0x10
            data: [0x00]
          command_on:
            cmd: [0x39, 0x81, 0x41, 0x01, 0x11]
            ack: [0x39, 0x81, 0xC1]
          command_off:
            cmd: [0x39, 0x81, 0x41, 0x01, 0x10]
            ack: [0x39, 0x81, 0xC1]
        - type: switch
          id: "outlet_8_2"
          name: "outlet_8_2"
          state:
            data: [0x39, 0x8f, 0x81]
          state_on:
            offset: 8
            mask: 0x10
            data: [0x10]
          state_off:
            offset: 8
            mask: 0x10
            data: [0x00]
          command_on:
            cmd: [0x39, 0x82, 0x41, 0x01, 0x11]
            ack: [0x39, 0x82, 0xC1]
          command_off:
            cmd: [0x39, 0x82, 0x41, 0x01, 0x10]
            ack: [0x39, 0x82, 0xC1]

        - type: climate
          id: "thermostat_1"
          name: "thermostat 1"
          visual:
            min_temperature: 5
            max_temperature: 40
            temperature_step: 0.5
          state:
            data: [0x36, 0x1f, 0x81]
          state_temperature_target:
            # Original lambda: return (data[9] & 0x7F) + ((data[9] & 0x80) ? 0.5f : 0.0f);
            offset: 9
            length: 1
            mask: 0x7F # Extract value
            precision: 1 # For 0.5 increments
            # Need custom logic for 0.5f addition based on 0x80 bit
          state_temperature_current:
            # Original lambda: return (data[10] & 0x7F) + ((data[10] & 0x80) ? 0.5f : 0.0f);
            offset: 10
            length: 1
            mask: 0x7F
            precision: 1
          state_off:
            offset: 5
            data: [0x00]
            mask: 0x01
          state_heat:
            offset: 5
            data: [0x01]
            mask: 0x01
          state_preset_away:
            offset: 6
            mask: 0x01
            data: [0x04]
          state_preset_none:
            offset: 6
            mask: 0x01
            data: [0x00]
          command_off:
            cmd: [0x36, 0x11, 0x43, 0x01, 0x00]
            ack: [0x36, 0x11, 0xc3]
          command_heat:
            cmd: [0x36, 0x11, 0x43, 0x01, 0x01]
            ack: [0x36, 0x11, 0xc3]
          command_temperature:
            # Original lambda: uint8_t target = (uint8_t)x + (((uint8_t)(x * 10) % 10) > 0 ? 0x80 : 0x00); return {{0x36, 0x11, 0x44, 0x01, target},{0x36, 0x11, 0xc4}};
            cmd: [0x36, 0x11, 0x44, 0x01, 0x00] # Placeholder for target
            value_offset: 4 # Target temperature goes here
            value_encode: none # Needs custom encoding logic
            ack: [0x36, 0x11, 0xc4]
          command_preset_away:
            cmd: [0x36, 0x11, 0x45, 0x01, 0x01]
            ack: [0x36, 0x11, 0xc5]
          command_preset_none:
            cmd: [0x36, 0x11, 0x45, 0x01, 0x00]
            ack: [0x36, 0x11, 0xc5]
        - type: climate
          id: "thermostat_2"
          name: "thermostat 2"
          visual:
            min_temperature: 5
            max_temperature: 40
            temperature_step: 0.5
          state:
            data: [0x36, 0x1f, 0x81]
          state_temperature_target:
            offset: 11
            length: 1
            mask: 0x7F
            precision: 1
          state_temperature_current:
            offset: 12
            length: 1
            mask: 0x7F
            precision: 1
          state_off:
            offset: 5
            data: [0x00]
            mask: 0x02
          state_heat:
            offset: 5
            data: [0x02]
            mask: 0x02
          state_preset_away:
            offset: 6
            mask: 0x02
            data: [0x02]
          state_preset_none:
            offset: 6
            mask: 0x02
            data: [0x00]
          command_off:
            cmd: [0x36, 0x12, 0x43, 0x01, 0x00]
            ack: [0x36, 0x12, 0xc3]
          command_heat:
            cmd: [0x36, 0x12, 0x43, 0x01, 0x01]
            ack: [0x36, 0x12, 0xc3]
          command_temperature:
            cmd: [0x36, 0x12, 0x44, 0x01, 0x00]
            value_offset: 4
            value_encode: none
            ack: [0x36, 0x12, 0xc4]
          command_preset_away:
            cmd: [0x36, 0x12, 0x45, 0x01, 0x01]
            ack: [0x36, 0x12, 0xc5]
          command_preset_none:
            cmd: [0x36, 0x12, 0x45, 0x01, 0x00]
            ack: [0x36, 0x12, 0xc5]
        - type: climate
          id: "thermostat_3"
          name: "thermostat 3"
          visual:
            min_temperature: 5
            max_temperature: 40
            temperature_step: 0.5
          state:
            data: [0x36, 0x1f, 0x81]
          state_temperature_target:
            offset: 13
            length: 1
            mask: 0x7F
            precision: 1
          state_temperature_current:
            offset: 14
            length: 1
            mask: 0x7F
            precision: 1
          state_off:
            offset: 5
            data: [0x00]
            mask: 0x04
          state_heat:
            offset: 5
            data: [0x04]
            mask: 0x04
          state_preset_away:
            offset: 6
            mask: 0x04
            data: [0x04]
          state_preset_none:
            offset: 6
            mask: 0x04
            data: [0x00]
          command_off:
            cmd: [0x36, 0x13, 0x43, 0x01, 0x00]
            ack: [0x36, 0x13, 0xc3]
          command_heat:
            cmd: [0x36, 0x13, 0x43, 0x01, 0x01]
            ack: [0x36, 0x13, 0xc3]
          command_temperature:
            cmd: [0x36, 0x13, 0x44, 0x01, 0x00]
            value_offset: 4
            value_encode: none
            ack: [0x36, 0x13, 0xc4]
          command_preset_away:
            cmd: [0x36, 0x13, 0x45, 0x01, 0x01]
            ack: [0x36, 0x13, 0xc5]
          command_preset_none:
            cmd: [0x36, 0x13, 0x45, 0x01, 0x00]
            ack: [0x36, 0x13, 0xc5]
        - type: climate
          id: "thermostat_4"
          name: "thermostat 4"
          visual:
            min_temperature: 5
            max_temperature: 40
            temperature_step: 0.5
          state:
            data: [0x36, 0x1f, 0x81]
          state_temperature_target:
            offset: 15
            length: 1
            mask: 0x7F
            precision: 1
          state_temperature_current:
            offset: 16
            length: 1
            mask: 0x7F
            precision: 1
          state_off:
            offset: 5
            data: [0x00]
            mask: 0x08
          state_heat:
            offset: 5
            data: [0x08]
            mask: 0x08
          state_preset_away:
            offset: 6
            mask: 0x08
            data: [0x08]
          state_preset_none:
            offset: 6
            mask: 0x08
            data: [0x00]
          command_off:
            cmd: [0x36, 0x14, 0x43, 0x01, 0x00]
            ack: [0x36, 0x14, 0xc3]
          command_heat:
            cmd: [0x36, 0x14, 0x43, 0x01, 0x01]
            ack: [0x36, 0x14, 0xc3]
          command_temperature:
            cmd: [0x36, 0x14, 0x44, 0x01, 0x00]
            value_offset: 4
            value_encode: none
            ack: [0x36, 0x14, 0xc4]
          command_preset_away:
            cmd: [0x36, 0x14, 0x45, 0x01, 0x01]
            ack: [0x36, 0x14, 0xc5]
          command_preset_none:
            cmd: [0x36, 0x14, 0x45, 0x01, 0x00]
            ack: [0x36, 0x14, 0xc5]

        - type: valve
          id: "gas_valve"
          name: "Gas Valve"
          state:
            data: [0x12, 0x01, 0x81]
          state_closed:
            offset: 5
            data: [0x02]
          state_open:
            offset: 5
            data: [0x01]
          command_close:
            cmd: [0x33, 0x01, 0x81, 0x03, 0x00, 0x05, 0x00]
            ack: [] # Not explicitly defined in original

        - type: button
          id: "elevator_call"
          name: "Elevator Call"
          command_press:
            cmd: [0x33, 0x01, 0x81, 0x03, 0x00, 0x24, 0x00]
            ack: [] # Not explicitly defined in original
