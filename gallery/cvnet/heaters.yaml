meta:
  name: "☑️난방 설정 (4개)"
  name_en: "☑️Heaters (4 Thermostats)"
  description: "CVNet 난방 온도조절기 4개 설정입니다."
  description_en: "CVNet 4 heating thermostats."
  version: "1.0.0"
  author: "wooooooooooook"
  tags: ["climate", "heater", "thermostat", "cvnet"]

entities:
  climate:
    - id: 'heater_1'
      name: 'Heater 1'
      visual:
        min_temperature: 6 °C
        max_temperature: 30 °C
        temperature_step: 1 °C
      state:
        data: [0x20, 0x01, 0x4A]
      state_temperature_current:
        offset: 5
      state_temperature_target: >-
        bitAnd(data[4], 0x7F)
      state_off:
        offset: 4
        data: [0x00]
        mask: [0x80]
      state_heat:
        offset: 4
        data: [0x80]
        mask: [0x80]
      command_off: >-
        [[0x20, 0x41, 0x01, 0x11, int(has(state.target_temperature) ? state.target_temperature : 0), 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00], [0x20, 0x01, 0x41, 0x91]]
      command_heat: >-
        [[0x20, 0x41, 0x01, 0x11, int(has(state.target_temperature) ? state.target_temperature : 0) + 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00], [0x20, 0x01, 0x41, 0x91]]
      command_temperature: >-
        [[0x20, 0x41, 0x01, 0x11, int(x) + 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00], [0x20, 0x01, 0x41, 0x91]]

    - id: 'heater_2'
      name: 'Heater 2'
      visual:
        min_temperature: 6 °C
        max_temperature: 30 °C
        temperature_step: 1 °C
      state:
        data: [0x20, 0x01, 0x4A]
      state_temperature_current:
        offset: 7
      state_temperature_target: >-
        bitAnd(data[6], 0x7F)
      state_off:
        offset: 6
        data: [0x00]
        mask: [0x80]
      state_heat:
        offset: 6
        data: [0x80]
        mask: [0x80]
      command_off: >-
        [[0x20, 0x42, 0x01, 0x11, int(has(state.target_temperature) ? state.target_temperature : 0), 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00], [0x20, 0x01, 0x42, 0x91]]
      command_heat: >-
        [[0x20, 0x42, 0x01, 0x11, int(has(state.target_temperature) ? state.target_temperature : 0) + 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00], [0x20, 0x01, 0x42, 0x91]]
      command_temperature: >-
        [[0x20, 0x42, 0x01, 0x11, int(x) + 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00], [0x20, 0x01, 0x42, 0x91]]

    - id: 'heater_3'
      name: 'Heater 3'
      visual:
        min_temperature: 6 °C
        max_temperature: 30 °C
        temperature_step: 1 °C
      state:
        data: [0x20, 0x01, 0x4A]
      state_temperature_current:
        offset: 9
      state_temperature_target: >-
        bitAnd(data[8], 0x7F)
      state_off:
        offset: 8
        data: [0x00]
        mask: [0x80]
      state_heat:
        offset: 8
        data: [0x80]
        mask: [0x80]
      command_off: >-
        [[0x20, 0x43, 0x01, 0x11, int(has(state.target_temperature) ? state.target_temperature : 0), 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00], [0x20, 0x01, 0x43, 0x91]]
      command_heat: >-
        [[0x20, 0x43, 0x01, 0x11, int(has(state.target_temperature) ? state.target_temperature : 0) + 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00], [0x20, 0x01, 0x43, 0x91]]
      command_temperature: >-
        [[0x20, 0x43, 0x01, 0x11, int(x) + 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00], [0x20, 0x01, 0x43, 0x91]]

    - id: 'heater_4'
      name: 'Heater 4'
      visual:
        min_temperature: 6 °C
        max_temperature: 30 °C
        temperature_step: 1 °C
      state:
        data: [0x20, 0x01, 0x4A]
      state_temperature_current:
        offset: 11
      state_temperature_target: >-
        bitAnd(data[10], 0x7F)
      state_off:
        offset: 10
        data: [0x00]
        mask: [0x80]
      state_heat:
        offset: 10
        data: [0x80]
        mask: [0x80]
      command_off: >-
        [[0x20, 0x44, 0x01, 0x11, int(has(state.target_temperature) ? state.target_temperature : 0), 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00], [0x20, 0x01, 0x44, 0x91]]
      command_heat: >-
        [[0x20, 0x44, 0x01, 0x11, int(has(state.target_temperature) ? state.target_temperature : 0) + 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00], [0x20, 0x01, 0x44, 0x91]]
      command_temperature: >-
        [[0x20, 0x44, 0x01, 0x11, int(x) + 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00], [0x20, 0x01, 0x44, 0x91]]
