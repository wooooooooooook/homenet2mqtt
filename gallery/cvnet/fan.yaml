meta:
  name: "환기팬 설정"
  name_en: "Fan"
  description: "CVNet 환기팬 설정입니다. 속도 조절을 지원합니다."
  description_en: "CVNet fan with speed control."
  version: "2.0.1"
  author: "wooooooooooook"
  tags: ["fan", "cvnet"]

discovery:
  match:
    data: [0x20, 0x01, 0x71]
    mask: [0xFF, 0xFF, 0xFF]

entities:
  fan:
    - id: 'fan_1'
      name: 'Fan 1'
      state:
        data: [0x20, 0x01, 0x71]
      state_on:
        offset: 5
        data: [0x01]
      state_off:
        offset: 5
        data: [0x00]
      command_on:
        data: [0x20, 0x71, 0x01, 0x11, 0x01, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00]
        ack: [0x20, 0x01, 0x71, 0x91]
      command_off:
        data: [0x20, 0x71, 0x01, 0x11, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00]
        ack: [0x20, 0x01, 0x71, 0x91]
      command_speed: >-
        [[0x20, 0x71, 0x01, 0x02, x, 0x00, 0x00], [0x60, 0x71, 0x01, 0x02, x]]
      state_speed:
        offset: 7
        signed: False
